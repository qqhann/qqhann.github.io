<!doctype html><html><head><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-87782758-5','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Djangoクイックレファレンス &ndash; qqhann</title><meta name=description property="og:description" content="コマンドライン操作 バージョン確認 $ python -m django --version プロジェクト作成 $ django-admin startproject mysite $ cd mysite 開発用サーバー起動 $ python manage.py runserver $ python manage.py runserver 8080 # ポート指定 アプリケーションを作|Qiushi(a.k.a. qqhann)'s web site. Find my information, my blog on technologies and personal hobbies here."><meta name=apple-mobile-web-app-title content="qqhann"><link rel=icon href=/favicon-64.png><link rel=apple-touch-icon href=/apple-touch-icon.png><link rel=mask-icon size=any href=/pinned-icon.svg><meta name=twitter:card content="summary"><meta name=twitter:site content="@qqhann"><meta name=twitter:creator content="@qqhann"><meta name=twitter:title content="Djangoクイックレファレンス | qqhann"><meta name=twitter:description content="コマンドライン操作 バージョン確認 $ python -m django --version プロジェクト作成 $ django-admin startproject mysite $ cd mysite 開発用サーバー起動 $ python manage.py runserver $ python manage.py runserver 8080 # ポート指定 アプリケーションを作|Qiushi(a.k.a. qqhann)'s web site. Find my information, my blog on technologies and personal hobbies here."><meta name=twitter:image content="https://qqhann.devtwitter-card.png"><link rel=stylesheet href=/assets/syntax.css><link rel=stylesheet href=/assets/primer-build.css><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/assets/custom_style.css></head><body class=bg-gray><div id=holy class="container-lg bg-white h-100"><div id=header class="px-1 bg-white"><nav class="UnderlineNav UnderlineNav--right px-2"><a class="UnderlineNav-actions muted-link h2" href=https://qqhann.dev>qqhann</a><div class=UnderlineNav-body><a class=UnderlineNav-item href=/><span>Info</span></a>
<a class=UnderlineNav-item href=/projects/><span>Projects</span></a>
<a class=UnderlineNav-item href=/blog/><span>Blog</span></a></div></nav></div><div role=main id=main class="holy-main markdown-body px-4 bg-white"><div class=Subhead><div class=Subhead-heading><div class="h1 mt-3 mb-1">Djangoクイックレファレンス</div></div><div class=Subhead-description><a href=/categories/django class=muted-link><span class="Label Label--gray-darker">django</span></a>
<a href=/tags/django class=muted-link><span class="Label Label--gray">django</span></a><div class=float-md-right><span title="Lastmod: 2018-06-28. Published at: 2018-06-28.">Published: 2018-06-28</span></div></div></div><article><section class="pb-6 mb-3 border-bottom"><h2 id=コマンドライン操作>コマンドライン操作</h2><h4 id=バージョン確認>バージョン確認</h4><pre><code>$ python -m django --version
</code></pre><h4 id=プロジェクト作成>プロジェクト作成</h4><pre><code>$ django-admin startproject mysite
$ cd mysite
</code></pre><h4 id=開発用サーバー起動>開発用サーバー起動</h4><pre><code>$ python manage.py runserver
$ python manage.py runserver 8080  # ポート指定
</code></pre><h4 id=アプリケーションを作るscaffoldのイメージ>アプリケーションを作る（Scaffoldのイメージ）</h4><pre><code>$ python manage.py startapp polls
</code></pre><h4 id=マイグレーション>マイグレーション</h4><p>マイグレーションを実行する。</p><pre><code>$ python manage.py migrate
$ python manage.py migrate --run-syncdb
</code></pre><h4 id=モデルを有効にするhttpsdocsdjangoprojectcomja20introtutorial02activating-models><a href=https://docs.djangoproject.com/ja/2.0/intro/tutorial02/#activating-models>モデルを有効にする</a></h4><p>マイグレーションのSQLコマンドを生成する</p><pre><code>$ python manage.py makemigrations polls
</code></pre><pre><code>$ python manage.py sqlmigrate polls 0001
</code></pre><h4 id=対話シェル>対話シェル</h4><pre><code>$ python manage.py shell
</code></pre><h2 id=model>Model</h2><h3 id=モデル設定設計>モデル設定・設計</h3><pre><code>ForeignField
m.CASCADE
</code></pre><p><a href=https://docs.djangoproject.com/en/2.0/topics/db/models/#relationships>Relationships</a>
<a href=https://docs.djangoproject.com/en/2.0/ref/models/relations/>Related object reference</a>
<a href=https://qiita.com/nachashin/items/f768f0d437e0042dd4b3>Django: モデルフィールドリファレンスの一覧</a> &lt;- 不完全
<a href=https://docs.djangoproject.com/ja/2.0/ref/models/fields/>モデルフィールドリファレンス</a></p><h5 id=on_delete><code>on_delete</code></h5><p><a href=https://torina.top/detail/297/>Django、<code>on_delete</code>を使う(django2.0から必須)</a></p><pre><code>models.CASCADE
models.PROTECT
models.SET_NULL
models.SET_DEFAULT
models.SET()
models.DO_NOTHING
</code></pre><h5 id=autofield><code>AutoField</code></h5><p>idに使われる。数字で、自動で1ずつ増える（？）。（参照：https://stackoverflow.com/a/6062240/8776028)</p><h5 id=unique><code>unique</code></h5><p>ユニークさを保証するが、shellで試したとき重複するとエラーになってしまうため、使いにくいかも。
idを変更する目的ならいじる必要ない。</p><h4 id=idを文字列にする><code>*</code>IDを文字列にする</h4><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>class</span> <span class=nc>FooModel</span><span class=p>(</span><span class=n>m</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=nb>id</span> <span class=o>=</span> <span class=n>m</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <span class=n>unique</span><span class=o>=</span><span class=bp>True</span><span class=p>,</span> <span class=n>primary_key</span><span class=o>=</span><span class=bp>True</span><span class=p>)</span>
</code></pre></div><p>このようにidを書き換えればいい。</p><h4 id=overwrite-save>Overwrite save()</h4><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
        <span class=c1># Before save</span>
        <span class=c1># ...</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>MyModel</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
        <span class=c1># After save</span>
        <span class=c1># ...</span>
</code></pre></div><h3 id=relationship>Relationship</h3><ul><li><a href=https://docs.djangoproject.com/en/2.1/ref/models/relations/>2.1/ref/models/relations/</a></li><li><a href=https://docs.djangoproject.com/en/2.1/topics/db/examples/>2.1/topics/db/examples/</a></li></ul><h4 id=多対多関係many-to-manyhttpsdocsdjangoprojectcomja20topicsdbexamplesmany_to_many><a href=https://docs.djangoproject.com/ja/2.0/topics/db/examples/many_to_many/>多対多関係(Many-to-many)</a></h4><p>m.ManyToManyField(RelatedModel)</p><p>ManyToManyは.save()してから登録することに注意!</p><p>ManyToMany.throughを明示指定すれば任意のモデルをManyToManyのRelationとして使用できる（？）</p><h5 id=extra-fields-on-many-to-many-relationshipshttpsdocsdjangoprojectcomen22topicsdbmodelsextra-fields-on-many-to-many-relationships><a href=https://docs.djangoproject.com/en/2.2/topics/db/models/#extra-fields-on-many-to-many-relationships>Extra fields on many-to-many relationships</a></h5><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>

<span class=k>class</span> <span class=nc>Person</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>128</span><span class=p>)</span>

    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>name</span>

<span class=k>class</span> <span class=nc>Group</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>128</span><span class=p>)</span>
    <span class=n>members</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ManyToManyField</span><span class=p>(</span><span class=n>Person</span><span class=p>,</span> <span class=n>through</span><span class=o>=</span><span class=s1>&#39;Membership&#39;</span><span class=p>)</span>

    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>name</span>

<span class=k>class</span> <span class=nc>Membership</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>person</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>Person</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>)</span>
    <span class=n>group</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>Group</span><span class=p>,</span> <span class=n>on_delete</span><span class=o>=</span><span class=n>models</span><span class=o>.</span><span class=n>CASCADE</span><span class=p>)</span>
    <span class=n>date_joined</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateField</span><span class=p>()</span>
    <span class=n>invite_reason</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>64</span><span class=p>)</span>
</code></pre></div><p>through Modelの要素で<code>order_by</code>するベストプラクティス何だろう
QuerySetの使い方？
<a href=https://stackoverflow.com/questions/3893955/django-manytomanyfield-ordering-using-through>Metaで記述する例</a></p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>class</span> <span class=nc>ProfileAccount</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
	<span class=k>pass</span>
	<span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
		<span class=n>ordering</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;number&#39;</span><span class=p>,)</span>
</code></pre></div><p><a href=https://docs.djangoproject.com/en/2.2/ref/models/options/#unique-together>複数属性の組でPrimary Keyとする</a></p><p>現状の方法では<code>unique_together</code>を用いる。これは将来depricatedとなる可能性があるため、他の方法があれば随時更新する。</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>class</span> <span class=nc>Hop</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>migration</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=s1>&#39;Migration&#39;</span><span class=p>)</span>
    <span class=n>host</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>User</span><span class=p>,</span> <span class=n>related_name</span><span class=o>=</span><span class=s1>&#39;host_set&#39;</span><span class=p>)</span>

    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
        <span class=n>unique_together</span> <span class=o>=</span> <span class=p>((</span><span class=s2>&#34;migration&#34;</span><span class=p>,</span> <span class=s2>&#34;host&#34;</span><span class=p>),)</span>
</code></pre></div><p>多対一](<a href=https://docs.djangoproject.com/ja/2.0/topics/db/examples/many_to_one/>https://docs.djangoproject.com/ja/2.0/topics/db/examples/many_to_one/</a>)</p><h4 id=一対一one-to-onehttpsdocsdjangoprojectcomen20topicsdbexamplesone_to_one><a href=https://docs.djangoproject.com/en/2.0/topics/db/examples/one_to_one/>一対一(one-to-one)</a></h4><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>m</span><span class=o>.</span><span class=n>OneToOneField</span><span class=p>()</span>
</code></pre></div><p>参照される方はsave済みである必要がある。</p><h4 id=その他modelpyを書くときのtips>その他Model.pyを書くときのTips</h4><h5 id=定義前のモデルを参照>定義前のモデルを参照</h5><p>クラス名を文字列で書けば良い</p><h3 id=モデル操作>モデル操作</h3><h4 id=モデルオブジェクトを作成するときの作法>モデルオブジェクトを作成するときの作法</h4><p><a href=https://docs.djangoproject.com/en/dev/topics/db/queries/#creating-objects>Creating objects</a></p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>f</span> <span class=o>=</span> <span class=n>FooModel</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s1>&#39;fooo&#39;</span><span class=p>)</span>
<span class=n>f</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>Player</span> <span class=c1># &lt;- Model</span>
<span class=n>Player</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<span class=n>Player</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>shard</span><span class=o>=</span><span class=s1>&#39;ea&#39;</span><span class=p>)</span>
</code></pre></div><h4 id=一括作成-bulk-create>一括作成 Bulk Create</h4><p>Django <a href=https://docs.djangoproject.com/en/2.1/ref/models/querysets/#bulk-create>https://docs.djangoproject.com/en/2.1/ref/models/querysets/#bulk-create</a></p><p>DRF <a href=https://www.django-rest-framework.org/api-guide/serializers/#dealing-with-multiple-objects>https://www.django-rest-framework.org/api-guide/serializers/#dealing-with-multiple-objects</a></p><p>DRF ListSerializer <a href=https://www.django-rest-framework.org/api-guide/serializers/#listserializer>https://www.django-rest-framework.org/api-guide/serializers/#listserializer</a></p><p><a href=http://note.crohaco.net/2018/django-rest-framework-serializer/>http://note.crohaco.net/2018/django-rest-framework-serializer/</a></p><h4 id=クエリ>クエリ</h4><p>.filter()の中で使う、多分。</p><p>lte (less than or equal)など
<a href=https://docs.djangoproject.com/en/2.0/ref/contrib/gis/geoquerysets/></a><code>lte</code>
<code>gte</code></p><p><a href=https://stackoverflow.com/a/20012419/8776028>cf.</a></p><blockquote><p>Consider using the .exists method, for it issues a faster query to your database than if you try to retrieve all the user information with the .get method. And the code gets a little cleaner too</p></blockquote><p>getよりfilter().exists()がいいらしい。</p><p><a href=http://blog.etianen.com/blog/2013/06/08/django-querysets/>Using Django querysets effectively</a>
all()やiterator()についても記述がある。</p><h4 id=ループの前にrelatedをあらかじめ取ってくる>ループの前にRelatedをあらかじめ取ってくる</h4><p><a href=https://qiita.com/shunsukeaihara/items/eaaace97f6db75355f95><code>select_related()</code>, <code>prefetch_related("creative_set"):</code></a></p><h3 id=統計分析>統計分析</h3><h4 id=aggregation>Aggregation</h4><p><a href=https://docs.djangoproject.com/ja/2.0/topics/db/aggregation/></a></p><h4 id=django-pandas>Django-Pandas</h4><p><a href=https://github.com/chrisdev/django-pandas></a></p><h2 id=view>View</h2><h3 id=ディレクトリ設計>ディレクトリ設計</h3><h4 id=簡易>簡易</h4><div class=highlight><pre class=chroma><code class=language-views.py data-lang=views.py><span class=k>def</span> <span class=nf>index</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=p>):</span>
    <span class=k>return</span> <span class=n>HttpResponse</span><span class=p>(</span><span class=s2>&#34;Hello world&#34;</span><span class=p>)</span>
</code></pre></div><div class=highlight><pre class=chroma><code class=language-urls.py data-lang=urls.py><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>views</span><span class=o>.</span><span class=n>index</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=s1>&#39;index&#39;</span><span class=p>),</span>
<span class=p>]</span>
</code></pre></div><h5 id=method-view-で部分的にアップデートする方法>Method view ?で部分的にアップデートする方法</h5><p><a href=https://stackoverflow.com/a/4674127/8776028>https://stackoverflow.com/a/4674127/8776028</a></p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>my_view</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=nb>id</span><span class=p>):</span> 
    <span class=n>instance</span> <span class=o>=</span> <span class=n>get_object_or_404</span><span class=p>(</span><span class=n>MyModel</span><span class=p>,</span> <span class=nb>id</span><span class=o>=</span><span class=nb>id</span><span class=p>)</span>
    <span class=n>form</span> <span class=o>=</span> <span class=n>MyForm</span><span class=p>(</span><span class=n>request</span><span class=o>.</span><span class=n>POST</span> <span class=ow>or</span> <span class=bp>None</span><span class=p>,</span> <span class=n>instance</span><span class=o>=</span><span class=n>instance</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>form</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
        <span class=n>form</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
        <span class=k>return</span> <span class=n>redirect</span><span class=p>(</span><span class=s1>&#39;next_view&#39;</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>render</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=s1>&#39;my_template.html&#39;</span><span class=p>,</span> <span class=p>{</span><span class=s1>&#39;form&#39;</span><span class=p>:</span> <span class=n>form</span><span class=p>})</span> 
</code></pre></div><h4 id=class-view>Class View</h4><p>ListView, DetailView
<a href=https://docs.djangoproject.com/ja/2.0/ref/class-based-views/generic-display/>Generic detail views</a></p><p>CreateView, DeleteView, EditView, FormView
<a href=https://docs.djangoproject.com/ja/2.0/topics/class-based-views/generic-editing/>クラスベースのビューでフォームを扱う</a></p><p><code>extra_context</code>は簡易に定義できるものの，urlパラメータを利用したオブジェクトを渡そうとするとselfが必要になる．そこで次のリンクを利用する．</p><p><a href=https://docs.djangoproject.com/en/2.1/topics/class-based-views/generic-display/#adding-extra-context>https://docs.djangoproject.com/en/2.1/topics/class-based-views/generic-display/#adding-extra-context</a></p><h2 id=template>Template</h2><h3 id=html>HTML</h3><p><a href=https://docs.djangoproject.com/ja/2.0/ref/templates/builtins/></a><a href=https://docs.djangoproject.com/ja/2.0/ref/templates/language/#template-inheritance></a></p><h2 id=form>Form</h2><p>Formクラスを使う。（使わなくてもいいかもしれないが）
タグの編集がめんどくさい。</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=n>q</span> <span class=o>=</span> <span class=n>forms</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>label</span><span class=o>=</span><span class=s1>&#39;search&#39;</span><span class=p>,</span> 
                    <span class=n>widget</span><span class=o>=</span><span class=n>forms</span><span class=o>.</span><span class=n>TextInput</span><span class=p>(</span><span class=n>attrs</span><span class=o>=</span><span class=p>{</span><span class=s1>&#39;placeholder&#39;</span><span class=p>:</span> <span class=s1>&#39;Search&#39;</span><span class=p>}))</span>
</code></pre></div><p><a href=https://stackoverflow.com/questions/4101258/how-do-i-add-a-placeholder-on-a-charfield-in-django>cf.</a>
<a href=https://docs.djangoproject.com/ja/2.0/ref/forms/widgets/>公式</a>
<a href=https://docs.djangoproject.com/ja/2.0/topics/forms/#widgets%3CPaste%3E>one more</a></p><p>値を取り出して使う方法
仮に使わなかった場合、どうやって値を取り出すのか不明。</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>if</span> <span class=n>form</span><span class=o>.</span><span class=n>is_valid</span><span class=p>():</span>
      <span class=n>subject</span> <span class=o>=</span> <span class=n>form</span><span class=o>.</span><span class=n>cleaned_data</span><span class=p>[</span><span class=s1>&#39;subject&#39;</span><span class=p>]</span>
</code></pre></div><p><a href=https://docs.djangoproject.com/ja/2.0/topics/forms/#field-data>cf.</a></p><p>フォームのPOST先は自動で元のViewだが、actionで指定することもできるらしい？
<a href=https://stackoverflow.com/questions/5467192/django-what-goes-into-the-form-action-parameter-when-view-requires-a-parameter>cf.</a></p><p>Submitボタンはないので普通に書いていいっぽい。
<a href=https://stackoverflow.com/questions/2080332/django-form-submit-button>cf.</a></p><h2 id=url>URL</h2><p>DetailsViewなどを使いたい時、URLではpkまたはslugしか受け付けてもらえない。</p><p>cf. <a href=https://stackoverflow.com/questions/427102/what-is-a-slug-in-django>What is a slug in dnango</a>
モデルにslugを加える必要がありそう。</p><h2 id=デバッグ>デバッグ</h2><p>データベースをデバッグするときの一連の操作</p><pre><code>mv db.sqlite3 db.sqlite3.bak
python manage.py migrate --run-syncdb
python manage.py shell
</code></pre><pre><code>from vainlab.models import Player
from vainlab.vain_api import VainAPI
v = VainAPI()
v.player_matches('ea', 'Qiuqiu')
</code></pre><p>SQL文を確認する！
<a href=https://www.laurencegellert.com/2016/09/django-enable-sql-debug-logging-in-shell-how-to/>reference</a></p><pre><code>import logging
log = logging.getLogger('django.db.backends')
log.setLevel(logging.DEBUG)
log.addHandler(logging.StreamHandler())
</code></pre><h2 id=デプロイ>デプロイ</h2><h3 id=wsgi>WSGI</h3><p><a href=https://docs.djangoproject.com/ja/2.0/howto/deployment/wsgi/></a>よくわからん。</p><h3 id=uwsgi>uWSGI</h3><p><a href=https://docs.djangoproject.com/en/2.0/howto/deployment/wsgi/uwsgi/>uwsgi</a>
これだっ。</p><h3 id=static>static</h3><pre><code class=language-terminal data-lang=terminal>$ python manage.py collectstatic
</code></pre><h1 id=dhireクトリ構成>dhireクトリ構成</h1><pre><code class=language-terminal data-lang=terminal>$ tree
.
├── db.sqlite3
├── gitshell
│   ├── __init__.py
│   ├── __pycache__
│   │   ├── __init__.cpython-36.pyc
│   │   ├── settings.cpython-36.pyc
│   │   ├── urls.cpython-36.pyc
│   │   └── wsgi.cpython-36.pyc
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
├── listter
│   ├── __init__.py
│   ├── admin.py
│   ├── apps.py
│   ├── migrations
│   │   └── __init__.py
│   ├── models.py
│   ├── tests.py
│   └── views.py
└── manage.py
</code></pre></section><section><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"qqhann"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></article></div><div id=side class="pr-1 bg-white"><aside class=pr-3><div id=toc class="Box Box--blue mb-3"><b>Djangoクイックレファレンス</b><nav id=TableOfContents><ul><li><a href=#コマンドライン操作>コマンドライン操作</a><ul><li></li></ul></li><li><a href=#model>Model</a><ul><li><a href=#モデル設定設計>モデル設定・設計</a></li><li><a href=#relationship>Relationship</a></li><li><a href=#モデル操作>モデル操作</a></li><li><a href=#統計分析>統計分析</a></li></ul></li><li><a href=#view>View</a><ul><li><a href=#ディレクトリ設計>ディレクトリ設計</a></li></ul></li><li><a href=#template>Template</a><ul><li><a href=#html>HTML</a></li></ul></li><li><a href=#form>Form</a></li><li><a href=#url>URL</a></li><li><a href=#デバッグ>デバッグ</a></li><li><a href=#デプロイ>デプロイ</a><ul><li><a href=#wsgi>WSGI</a></li><li><a href=#uwsgi>uWSGI</a></li><li><a href=#static>static</a></li></ul></li></ul></nav></div><div><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<iframe src="https://www.facebook.com/plugins/share_button.php?href=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&layout=button&size=small&mobile_iframe=true&width=61&height=20&appId" width=61 height=20 style=border:none;overflow:hidden scrolling=no frameborder=0 allowtransparency=true allow=encrypted-media></iframe></div></aside></div><div id=footer class="pt-2 pb-3 bg-white text-center"><span class="text-small text-gray">©Qiushi Pan 2018-2019 &#183;
Powered by the
<a href=https://github.com/qqhann/hugo-primer class=link-gray-dark>Hugo-Primer</a> theme for
<a href=https://gohugo.io class=link-gray-dark>Hugo</a>.</span></div></div><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type=text/x-mathjax-config>MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script></body></html>